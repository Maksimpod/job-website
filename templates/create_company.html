{% extends 'base.html' %}

{% block content %}
<div class="resumeBox">
    <div class="resumeFormBox">
      <h2>Основная информация</h2>
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <ul class="regErrorMessage">
              {% for message in messages %}
                <li style="color: red;">{{ message }}</li>
              {% endfor %}
            </ul>
          {% endif %}
        {% endwith %}
        <form action="" method="post" novalidate>
            {{ form.hidden_tag() }}
            <p class="fieldsMargin">
              {{ form.title(size=32, class="form-field") }}<br>
              {% for error in form.title.errors %}
                <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
            </p>
            <p class="fieldsMargin">
              {{ form.description(class="form-field textArea") }}<br>
            </p>
            <hr class="resumeHr">
            <p class="fieldsMargin">
              {{ form.adress(size=32, class="form-field") }}<br>
            </p>
            <p class="fieldsMargin">
              {{ form.website(size=32, class="form-field") }}<br>
                {% for error in form.website.errors %}
                <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
            </p>
            <p class="fieldsMargin">
              {{ form.email(size=32, class="form-field") }}<br>
              {% for error in form.email.errors %}
                <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
            </p>
            <p class="fieldsMargin">
              {{ form.tel(class="form-field") }}<br>
              {% for error in form.tel.errors %}
                <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
            </p>
          <hr class="resumeHr">
            <p class="fieldsMargin">
              {{ form.found(class="form-field") }}<br>
              {% for error in form.found.errors %}
                <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
            </p>
            <p class="fieldsMargin">
              {{ form.employees(class="form-field") }}<br>
              {% for error in form.employees.errors %}
                <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
            </p>
            <hr class="resumeHr">

            <p>{{ form.submit(class="submit-button") }}</p>
        </form>
    </div>
</div>
<script>
    document.addEventListener('input', function(event) {
  if (event.target.classList.contains('textArea')) {
    autoResizeTextarea(event.target);
  }
});

function autoResizeTextarea(textarea) {
  textarea.style.height = 'auto';
  textarea.style.height = Math.min(textarea.scrollHeight, 300) + 'px';
  textarea.style.overflowY = textarea.scrollHeight > 300 ? 'auto' : 'hidden';
}

</script>
{% endblock %}

